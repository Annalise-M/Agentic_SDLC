# WeatherWise PWA

A sleek, magazine-style Progressive Web App for comparing weather across multiple travel destinations. Built with React, TypeScript, Vite, SCSS, and GSAP.

## âœ¨ Features

### Core Weather Features
- **Multi-Location Weather Comparison**: Compare weather conditions for up to 5 locations side-by-side in a beautiful horizontal carousel
- **7-Day Forecast**: View detailed weather forecasts for the next week
- **Current Conditions**: Real-time weather data including temperature, humidity, wind speed, UV index, visibility, and pressure
- **Temperature Unit Toggle**: Switch between Fahrenheit and Celsius with persistent user preference
- **Visual Weather Icons**: Beautiful weather icons from Visual Crossing API

### Design & UX
- **Magazine-Style Layout**: Premium horizontal carousel design with full-background location cards
- **Location Background Images**: Real cityscape/landscape photos from Pexels API (landscape-only, random rotation)
- **Smooth GSAP Animations**: Professional entrance animations and micro-interactions
- **Auto-Location Detection**: Automatically detects and adds user's current location on first visit
- **Fully Responsive Design**: Works seamlessly on desktop, tablet, and mobile devices
- **Persistent State**: Selected locations and preferences saved in localStorage
- **Modern Icons**: Ionicons 5 (react-icons) for a consistent, filled aesthetic

### Progressive Web App (PWA) Features
- **Installable**: Add WeatherWise to your home screen on mobile and desktop devices
- **Selective Offline Mode**: Star up to 3 locations to save for offline access
- **Smart Caching**: Service worker caches API responses and images for fast, offline-capable experience
- **Custom Install Prompt**: Beautiful, non-intrusive install banner with clear call-to-action
- **Offline Indicators**: Visual badges show which locations are saved for offline use
- **IndexedDB Storage**: Weather data persisted locally for offline functionality
- **Auto-Update**: Service worker automatically updates in the background

### Performance
- **Smart Caching**: Weather data is cached for 30 minutes to reduce API calls
- **Service Worker Caching**: API responses, images, and static assets cached for instant loading
- **Demo Mode**: Fallback to mock data when API keys are not configured
- **Optimized Images**: Location images cached for fast loading
- **Lighthouse Scores**: Performance 96/100, Accessibility 100/100, Best Practices 96/100, SEO 91/100

## ğŸ› ï¸ Tech Stack

### Core
- **Frontend**: React 19 + TypeScript
- **Build Tool**: Vite 7.3
- **Styling**: SCSS Modules + Tailwind CSS
- **Animations**: GSAP (GreenSock Animation Platform)
- **State Management**: Zustand (with localStorage persistence)
- **Data Fetching**: TanStack Query v5 (React Query)
- **Date Handling**: date-fns
- **Icons**: react-icons (Ionicons 5 + Weather Icons)

### PWA & Offline
- **PWA Plugin**: vite-plugin-pwa
- **Service Worker**: Workbox (auto-generated by vite-plugin-pwa)
- **Offline Storage**: Dexie (IndexedDB wrapper)
- **Manifest**: Auto-generated web app manifest with icons
- **Caching Strategy**: CacheFirst for API responses and images

### APIs
- **Weather**: Visual Crossing Weather API (1000 records/day free tier)
- **Images**: Pexels API (free tier with attribution)
- **Geolocation**: Browser Geolocation API + OpenStreetMap Nominatim reverse geocoding

## ğŸ“ Project Structure

```
weatherwise-pwa/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ pwa/
â”‚   â”‚   â”‚   â”œâ”€â”€ InstallPrompt.tsx            # Custom install prompt component
â”‚   â”‚   â”‚   â””â”€â”€ InstallPrompt.module.scss    # Install prompt styling
â”‚   â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â”‚   â””â”€â”€ LocationSearch.tsx           # Location search with autocomplete
â”‚   â”‚   â””â”€â”€ weather/
â”‚   â”‚       â”œâ”€â”€ WeatherCard.tsx              # Magazine-style weather card
â”‚   â”‚       â””â”€â”€ WeatherCard.module.scss      # SCSS styling
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ weather.ts                   # Visual Crossing API client
â”‚   â”‚   â”‚   â””â”€â”€ unsplash.ts                  # Pexels image API client
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â””â”€â”€ mock-weather.ts              # Demo mode fallback data
â”‚   â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”‚   â””â”€â”€ indexed-db.ts                # IndexedDB setup with Dexie
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useWeather.ts                # React Query hook for weather
â”‚   â”‚   â”‚   â””â”€â”€ useGeolocation.ts            # Auto-location detection hook
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ temperature.ts               # F/C conversion utilities
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ locations-store.ts               # Zustand store (locations + offline)
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ weather.ts                       # TypeScript interfaces
â”‚   â”œâ”€â”€ App.tsx                              # Main application component
â”‚   â”œâ”€â”€ main.tsx                             # Application entry point
â”‚   â””â”€â”€ index.css                            # Global styles + carousel CSS
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ pwa-64x64.png                        # PWA icon 64x64
â”‚   â”œâ”€â”€ pwa-192x192.png                      # PWA icon 192x192
â”‚   â”œâ”€â”€ pwa-512x512.png                      # PWA icon 512x512
â”‚   â”œâ”€â”€ maskable-icon-512x512.png            # Maskable PWA icon
â”‚   â”œâ”€â”€ apple-touch-icon-180x180.png         # iOS icon
â”‚   â””â”€â”€ favicon.ico                          # Browser favicon
â”œâ”€â”€ vite.config.ts                           # Vite + PWA plugin configuration
â”œâ”€â”€ .env                                     # Environment variables (not committed)
â”œâ”€â”€ .env.example                             # Example environment variables
â””â”€â”€ package.json
```

## ğŸš€ Setup Instructions

### 1. Prerequisites

- Node.js 18+ installed
- npm or yarn package manager

### 2. Clone and Install

```bash
cd weatherwise-pwa
npm install
```

### 3. Get API Keys

#### Visual Crossing Weather API (Required)
1. Go to [Visual Crossing Weather API](https://www.visualcrossing.com/weather-api)
2. Sign up for a free account (1000 records/day free tier)
3. Copy your API key

#### Pexels API (Optional - for real location photos)
1. Go to [Pexels API](https://www.pexels.com/api/)
2. Click "Get Started" and sign up (free, no credit card)
3. Copy your API key from the dashboard

### 4. Configure Environment Variables

1. Copy the example environment file:
   ```bash
   cp .env.example .env
   ```

2. Edit `.env` and add your API keys:
   ```
   VITE_VISUAL_CROSSING_API_KEY=your_visual_crossing_key_here
   VITE_PEXELS_API_KEY=your_pexels_key_here  # Optional
   ```

### 5. Run Development Server

```bash
npm run dev
```

The application will open at `http://localhost:3000`

## ğŸ§ª Testing the Application

### End-to-End Testing Flow

1. **Auto-Location Detection**
   - On first visit, browser will request location permission
   - If granted, your current location will be automatically added
   - Location name is resolved via OpenStreetMap Nominatim (more accurate)

2. **Search for Locations**
   - Click on the search bar
   - Type a city name (e.g., "Barcelona", "Tokyo", "Paris")
   - Select from popular destination suggestions
   - Magazine-style weather card appears with:
     - Real location photo (cityscape/landscape, random on each reload)
     - Current temperature with F/C toggle
     - Weather icon and conditions
     - 6 key metrics (humidity, wind, UV, visibility, pressure, rain)
     - 5-day forecast preview

3. **Compare Multiple Locations**
   - Add up to 5 locations total
   - Cards display in horizontal scrollable carousel
   - Centered layout with smooth scroll
   - Each location gets a random landscape image

4. **Toggle Temperature Units**
   - Click the Â°C / Â°F button in the header
   - Instantly converts all temperatures across all cards
   - Preference saved to localStorage

5. **Remove Locations**
   - Click the X button on any card
   - Smooth animation
   - Location removed from localStorage

6. **Test Persistence**
   - Refresh the page
   - Your locations and temperature unit preference persist

7. **Test PWA Features**
   - **Install Prompt**: After 5 seconds, an install banner appears at the bottom
   - **Save for Offline**: Click the star icon on any weather card to save for offline (max 3)
   - **Offline Badge**: "Saved for Offline" badge appears on starred locations
   - **Install App**: Click "Install" button to add WeatherWise to your home screen
   - **Offline Mode**: Turn off network, app still works for starred locations
   - **Star Indicator**: Starred locations show a golden filled star icon

### Features to Verify

#### Core Features
- [x] Auto-location detection on first visit (OpenStreetMap Nominatim)
- [x] Location search with popular destination suggestions
- [x] Real weather data from Visual Crossing API
- [x] Horizontal carousel layout (centered, scrollable)
- [x] Full-background card design with location images from Pexels
- [x] Random image rotation per page reload
- [x] Smooth GSAP entrance animations
- [x] Current temperature and conditions
- [x] 6 key weather metrics displayed
- [x] 5-day forecast in card
- [x] Fahrenheit/Celsius toggle with persistence
- [x] Maximum 5 locations enforced
- [x] Remove button works with proper z-index
- [x] Locations and preferences persist in localStorage
- [x] Loading skeleton while fetching
- [x] Demo mode fallback when no API keys
- [x] Fully responsive (mobile, tablet, desktop)

#### PWA Features
- [x] Install prompt appears after 5 seconds (beforeinstallprompt event)
- [x] App installable on mobile and desktop
- [x] Star button to save locations for offline (up to 3)
- [x] Golden amber color when location is saved offline
- [x] "Saved for Offline" badge displays on starred locations
- [x] Weather data cached to IndexedDB when starred
- [x] Service worker caches API responses and images
- [x] App works offline for starred locations
- [x] Lighthouse PWA score: Performance 96/100, Accessibility 100/100

## ğŸ“Š API Usage and Rate Limits

### Visual Crossing API Free Tier
- **Limit**: 1000 records per day
- **Usage**: Each location lookup uses ~2-3 records
- **Capacity**: ~40 active users per hour with caching
- **Caching**: 30-minute cache in React Query

### Pexels API Free Tier
- **Limit**: Unlimited searches, attribution required
- **Usage**: 1 request per location (cached in browser)
- **Features**: Landscape-only images, no people in focus
- **Selection**: Random on each page reload for variety

### OpenStreetMap Nominatim
- **Limit**: Free, no API key required
- **Usage**: Reverse geocoding for auto-location
- **Policy**: Must include User-Agent header (implemented)

## ğŸ—ï¸ Build for Production

```bash
npm run build
```

Output will be in the `dist/` directory, ready for deployment.

## ğŸŒ Deployment

The app can be deployed to:
- **Vercel**: `vercel deploy`
- **Netlify**: Drag and drop `dist/` folder
- **GitHub Pages**: Use GitHub Actions workflow
- Any static hosting service

**Important**: Set environment variables in your hosting platform:
- `VITE_VISUAL_CROSSING_API_KEY` (required)
- `VITE_PEXELS_API_KEY` (optional)

## ğŸ”§ Troubleshooting

### API Keys Not Working
- Check that your `.env` file has the correct keys
- Verify keys start with `VITE_` (required for Vite)
- Restart the dev server after changing `.env`

### Weather Data Not Loading
- Open browser DevTools Console for error messages
- Check Network tab for API requests
- Verify API key at Visual Crossing dashboard
- Check if you've exceeded rate limit (1000 records/day)

### Images Not Showing
- Check browser console for Pexels API errors
- Verify `VITE_PEXELS_API_KEY` is set correctly
- If no key provided, app falls back to gradient backgrounds

### Auto-Location Not Working
- Grant browser location permission when prompted
- Check browser console for geolocation errors
- Clear localStorage key `auto-location-detected` to retry

### Text Overlap on Cards
- Verified fixed with proper spacing and absolute positioning
- Location info pinned to top, weather details at bottom

## ğŸ“‹ Development Roadmap

### âœ… Phase 1: Foundation (COMPLETE)
- [x] Vite + React + TypeScript setup
- [x] Visual Crossing Weather API integration
- [x] Location search with autocomplete
- [x] Demo mode fallback
- [x] Zustand state management with localStorage
- [x] Auto-location detection (OpenStreetMap Nominatim)
- [x] Magazine-style SCSS carousel layout
- [x] GSAP animations
- [x] Pexels location images (random rotation)
- [x] Fahrenheit/Celsius toggle
- [x] react-icons integration (Ionicons 5)
- [x] Fully responsive design
- [x] Text overlap fixes

### ğŸ“… Phase 3: Smart Recommendations (OPTIONAL EXTRAS)
- [ ] Packing list generator (weather-based)
- [ ] Activity suggestions (weather-appropriate)
- [ ] Trip duration and preferences UI

*Note: Phase 3 is considered optional enhancement features, not core functionality.*

### âœ… Phase 4: PWA Features (COMPLETE)
- [x] PWA manifest configuration with branding
- [x] Service worker setup with Workbox caching strategies
- [x] IndexedDB offline storage with Dexie
- [x] Selective offline caching (user-controlled, max 3 locations)
- [x] Star/unstar button for offline location saving
- [x] Offline badges and visual indicators
- [x] Custom "Add to Home Screen" install prompt
- [x] Auto-update service worker
- [x] Lighthouse scores: Performance 96/100, Accessibility 100/100, Best Practices 96/100, SEO 91/100

### ğŸ’° Phase 5: Monetization
- [ ] Flight search affiliate integration (Skyscanner)
- [ ] Hotel booking affiliate integration (Booking.com)
- [ ] Travel insurance affiliate (SafetyWing/World Nomads)
- [ ] Language learning integration with progress tracking

### ğŸš€ Phase 6: Testing & Launch
- [ ] Unit tests (Vitest)
- [ ] Integration tests for API routes
- [ ] E2E tests (Playwright)
- [ ] SEO optimization (OpenGraph, Twitter Cards)
- [ ] Production deployment to custom domain
- [ ] Performance monitoring (Sentry + Vercel Analytics)

## ğŸ¨ Design Philosophy

WeatherWise follows a **sleek online magazine aesthetic**:
- Large, editorial typography (SF Pro Display font stack)
- Premium horizontal carousel with centered cards
- Full-background imagery with gradient overlays
- Professional photography (landscape-only, random rotation)
- Smooth, polished GSAP animations
- Modern Ionicons with filled aesthetic
- Clean color palette with subtle gradients
- Generous whitespace and breathing room
- White text with shadows for legibility over images

## ğŸ¤ Contributing

This is a learning project demonstrating modern React patterns, SCSS modules, GSAP animations, and PWA capabilities. Feel free to fork and experiment!

## ğŸ“„ License

MIT

## ğŸ™ Credits

- Weather data: [Visual Crossing Weather API](https://www.visualcrossing.com/)
- Location photos: [Pexels](https://www.pexels.com/)
- Icons: [react-icons](https://react-icons.github.io/react-icons/) (Ionicons 5 + Weather Icons)
- Reverse geocoding: [OpenStreetMap Nominatim](https://nominatim.openstreetmap.org/)
- Animations: [GSAP](https://greensock.com/gsap/)
- Built with [Vite](https://vitejs.dev/) + [React](https://react.dev/)
- Built with â¤ï¸ for travelers

---

**Current Status**: Phase 4 Complete - Fully Functional PWA! | Next: Monetization (Phase 5)
**Last Updated**: January 11, 2026
